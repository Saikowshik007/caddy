jobtrackai.duckdns.org {
    # No global OPTIONS handler. Let Flask-CORS answer preflight.

    # Learning Platform endpoints - KEEP /learn prefix (Flask expects it!)
    handle /learn/* {
        # No header directives here (no CORS at proxy layer)
        reverse_proxy learning-platform-backend:5000
    }

    # JobTrak API endpoints (microservice 2)
    handle /api/* {
        # No CORS headers here either
        reverse_proxy jobtrak-api-1:8000 jobtrak-api-2:8000 jobtrak-api-3:8000
    }

    # Root endpoint
    handle / {
        # No CORS headers
        respond "JobTrak Services Running" 200
    }

    # Health check endpoint
    handle /health {
        # No CORS headers
        reverse_proxy jobtrak-api-1:8000
    }
}
